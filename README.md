# FlatTouch
## 프로젝트 소개
![02_title](https://github.com/woorija/FlatTouch/assets/77769870/36278b2f-ea03-49ad-b9db-2fae04c55e09)

 - 작품명 : **Flat Touch**
 - 장르 : **리듬 & 퍼즐 게임**
 - 플랫폼 : `Windows`, `Android`
 - 개발 기간 : `2020.09.02~2020.12.08` / `2023.03.03~2023.04.14`
 - 개발 환경 : `Unity 2021.3.19f1 (urp)`
 - 개발 언어 : `C#`
 - 개발 팀원
    - 기획 1
    - 그래픽 3
    - **프로그래밍 1**
 - 소개 : 스테이지별로 BGM에 맞춰 정답인 플랫을 동시에 터치하거나 순서대로 터치하여 점수를 획득하여 스테이지, 스토리를 해금하여, 최종적으로 엔딩 스토리를 보는 게임입니다.

## 주요 기능
 - state fattern을 사용하여 게임 내 주요 로직의 유지보수를 간단히 함
   - 패턴매니저에서 스테이지별 사용 패턴만 세팅하면 되게끔 하여 패턴매니저 클래스의 수정 없이 패턴의 확장 가능
 - 타임라인을 사용하여 프롤로그 영상 제작
   - 복잡한 스크립트를 사용하지 않고 유니티에서 제공해주는 툴을 사용하여 간단히 영상을 제작가능
<details>
 <summary>프로젝트 개발 과정</summary>
 
 - 2020 2학기 팀프로젝트
   - 어려웠던 점
     1. 기기 별 화면 비율 및 해상도가 달라 게임 내 이미지들의 비율이 기기마다 달라지는 현상이 있었다.
     2. 프로젝트에 쓰일 리소스의 크기가 제각각이라 빌드 시 많은 용량을 차지하는 현상이 생겼다.
   - 해결 방안
     1. 게임의 스크린 비율을 고정시키고, 레터박스를 사용해 남는 화면을 검은 화면으로 채워 이미지 비율이 기기마다 달라지는 현상을 제거했다.
     2. 이미지를 용도 별로 2048 * 2048 크기의 아틀라스에 모아서 사용하고, 압축포맷을 저용량 포맷으로 바꿔서 빌드 용량을 대폭 줄였다.
 - 2023 졸업작품
   - 팀프로젝트 이후 프로젝트 개선작업
     - 렌더 파이프라인 변경
       - 기존 팀프로젝트에서는 built-in 파이프라인을 사용해 프로젝트를 진행했다. 그러나 urp가 모바일 환경에 최적화가 잘 되어있다는 점, urp에서 제공하는 2d 라이트 등의 기능 사용을 위해 urp로 변경하여 프로젝트를 진행하게 되었다.
     - 무분별하게 사용되었던 싱글톤 패턴 정리
       - 해당 팀프로젝트가 첫 프로젝트였던 만큼 제한된 시간내에 게임을 완성하기 위해 각종 기능을 매니저 클래스로 작성하고, 싱글톤 패턴을 사용해 클래스간 상호작용을 구현했었다.
       - 졸업작품으로 출품하기 위해 게임의 기능을 추가, 수정하려고 보니 싱글톤 패턴이 너무 많이 사용되어 생각했던 기능을 추가하는 것이 복잡하다고 판단하였고, 프로젝트를 urp로 변경하기로 하는 김에 스크립트를 다시 짜면서 싱글톤 패턴 의존도를 줄였다.
     - 여러 플랫폼에서 플레이가 가능하게 수정
       - 팀프로젝트를 진행했을 때, 동시에 버튼 2개를 터치하는 기능을 구현해야 해서 Input.GetTouch()함수를 사용하는 터치매니저를 구현하여 멀티 터치 기능을 구현했다. 다만, Input.GetTouch()함수는 모바일에서만 작동되어 PC에서는 게임 내에서 모든 터치가 먹히지 않아 플레이가 불가능한 것을 확인하게 되었다.
       - 졸업작품으로 내기 위해 수정을 할 때, 테스트하기 편하도록 PC에서도 키보드를 사용해 게임을 플레이 할 수 있도록 기능을 추가했다. 멀티 터치 기능 또한 복잡한 터치매니저를 사용하지 않고, 버튼 컴포넌트를 사용하여 각 Flat의 터치함수를 실행하게 하여 스크립트를 최적화 하였다.
     - 플랫 패턴의 다양화
       - 기존 팀프로젝트에서는 한 패턴을 응용하여 3가지 패턴을 만들어 사용했고, 3가지 패턴 모두 9개의 플랫 중 2개의 플랫을 타이밍에 맞게 터치해야 했기에, 많은 스테이지에 비해 패턴이 단조로웠다.
       - 다양한 패턴을 준비하면서 추후 다른 패턴을 더 추가할 일이 생겨도 다른 스크립트를 수정할 필요가 없도록 패턴을 FSM기반으로 설계하여 패턴 유지보수를 간단히 할 수 있게 하였다.
     - 인트로씬 작업
       - 팀프로젝트를 진행할 당시 코루틴을 활용해 스크립트로 인트로씬을 제어했다.
       - 한 스크립트에 인트로씬에 필요한 모든 변수를 두고 제어하는 것이  스크립트를 수정하고, 일일히 플레이를 해서 맞게 수정되었는지 체크해야 하는 것이 번거로워,기능을 찾아보던 중 타임라인이라는 기능을 발견했고 별도의 플레이 없이 변화를 파악할 수 있어 인트로씬 작업을 코루틴에서 타임라인으로 변경하게 되었다.
       - 다만, 기본적으로 제공되는 타임라인 기능만으로는 만들 수 있는 연출이 부족하여, 에셋스토어에서 제공되는 타임라인 추가기능을 받고, UI를 흑백,컬러로 전환하는 커스텀 기능을 추가하여 인트로씬을 완성했다.
 
</details>

## 프로젝트 설치 방법
1. [Unity Hub](https://unity.com/kr/download)를 설치한다.
2. `Unity 2021.3.19f1`버전의 에디터를 설치한다.
3. 저장소를 클론한다.
   ```bash
   git clone https://github.com/woorija/FlatTouch.git
   ```
4. Unity Hub에서 프로젝트 실행 후 빌드한다.
   
## 게임 실행
 1. [다운로드](https://drive.google.com/drive/folders/1uLXfXuIa-yeTxubEFT-_eFSeokQJmhse)
 2. zip 파일을 압축 해제하고 `FlatTouch.exe` 파일을 실행하면 게임을 플레이할 수 있습니다.
   - `!!!주의!!!` 폴더 내 다른 파일, 폴더를 옮겨서는 안됩니다.

## 게임 조작법
 - 클릭을 통해 조작이 가능합니다.
 - PC의 경우 qweasdzxc 혹은 키패드 789456123을 사용하여 플랫을 터치할 수 있습니다.

## 스크린샷
<img width="242" height="429" alt="Image" src="https://github.com/user-attachments/assets/a909e9b8-440a-4e40-9a51-4a226128d501" />
<img width="242" height="429" alt="Image" src="https://github.com/user-attachments/assets/3b212b20-c950-45ea-97c1-97f5600c683c" />
<img width="242" height="429" alt="Image" src="https://github.com/user-attachments/assets/662b2ac3-86f2-4f3d-9fa3-a7cc250fd849" />
<img width="242" height="429" alt="Image" src="https://github.com/user-attachments/assets/894fbe39-d7d6-46d7-992e-e2caf50b8b8b" />
<img width="242" height="429" alt="Image" src="https://github.com/user-attachments/assets/4f2fc829-bb54-4d45-9a24-baa30b3617bf" />
<img width="242" height="429" alt="Image" src="https://github.com/user-attachments/assets/41a97d4a-6501-473e-8470-1af38609c6b5" />

## 플레이 영상
[![02_title](https://github.com/woorija/FlatTouch/assets/77769870/36278b2f-ea03-49ad-b9db-2fae04c55e09)](https://youtu.be/vSpO8WzcGck)
